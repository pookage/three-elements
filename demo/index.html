<!DOCTYPE html>
<html>
	<head>
		<title>THREE-Elements | Demo</title>

		<!-- create an import map to  make for neater imports -->
		<script type="importmap">
			{
				"imports": {
					"three"           : "https://unpkg.com/three@0.157.0/build/three.module.min.js",
					"three/addons/"   : "https://unpkg.com/three@0.157.0/examples/jsm/",
					"three-ecs"       : "../lib/three-ecs/index.js",
					"three-ecs/"      : "../lib/three-ecs/",
					"three-elements"  : "../index.js",
					"three-elements/" : "../"
				}
			}
		</script>

		<!-- import custom element defintions, which import the required three-ecs definitions -->
		<script type="module">
			import { Color } from "three"
			import { Entity } from "three-ecs";
			import { ThreeEntityElement } from "three-elements";

			class Box extends Entity {
				static get defaultComponents(){
					return {
						geometry: {
							primitive: "box",
							height: 1,
							width:  1,
							depth:  1
						},
						material: {
							color: new Color(0x0000ff)
						},
						mesh: {}
					};
				}// get defaultComponents

				static get mappings(){
					return {
						...Entity.mappings,
						"monkey": "material.color"
					}
				}// get mappings
			}// ThreeEntity

			class ThreeBoxElement extends ThreeEntityElement {
				init(){
					return new Box();
				}// init
			}// ThreeBox

			window.customElements.define("three-box", ThreeBoxElement);
		</script>

		<!-- basic demo styles -->
		<style>
			* {
				box-sizing: border-box;;
			}
			html, body {
				height: 100%;
				width: 100%;
			}
			body {
				margin: 0;
			}
		</style>
	</head>
	<body>
		<!-- define a three.js scene using three-elements -->
		<three-world>
			<!-- camera -->
			<three-entity
				position="0 1.5 0"
				rotation="-20 0 0"
				camera
			></three-entity>

			<!-- basic "hello world" scene -->
			<three-entity
				position="1 0 -3"
				geometry="primitive: box"
				material="color: red"
				mesh
			></three-entity>
			<three-entity
				position="0 0.5 -5"
				geometry="
					primitive: sphere;
					radius: 1;
				"
				material="color: blue"
				mesh
			></three-entity>
			<!-- <three-entity
				position="-1 0 -3"
				geometry="primitive: box"
				material="color: green"
				mesh
			></three-entity> -->

			<three-box
				position="-1 0 -3"
				monkey="#00ff00"
			></three-box>
		</three-world>
	</body>
</html>
